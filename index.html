<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pig Farm Clicker - Enhanced Edition</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-green: #4ade80;
        --primary-pink: #ec4899;
        --primary-gold: #fbbf24;
        --dark-bg: #0f172a;
        --dark-surface: #1e293b;
        --glass-bg: rgba(255, 255, 255, 0.05);
        --glass-border: rgba(255, 255, 255, 0.1);
        --text-primary: #f1f5f9;
        --text-secondary: #94a3b8;
        --shadow-color: rgba(0, 0, 0, 0.3);
        --transition-speed: 0.3s;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: var(--dark-bg);
        color: var(--text-primary);
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
      }

      /* Animated background */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 20% 50%,
            rgba(76, 175, 80, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(236, 72, 153, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 20%,
            rgba(251, 191, 36, 0.1) 0%,
            transparent 50%
          );
        animation: backgroundShift 20s ease-in-out infinite;
        z-index: -1;
      }

      @keyframes backgroundShift {
        0%,
        100% {
          transform: scale(1) rotate(0deg);
        }
        50% {
          transform: scale(1.1) rotate(5deg);
        }
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 1rem;
      }

      /* Header */
      .header {
        text-align: center;
        margin-bottom: 1rem;
        position: relative;
      }

      h1 {
        font-size: clamp(2rem, 5vw, 3.5rem);
        font-weight: 800;
        background: linear-gradient(
          135deg,
          var(--primary-pink),
          var(--primary-gold)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 0 30px rgba(236, 72, 153, 0.5);
        margin-bottom: 0.5rem;
        animation: titleGlow 3s ease-in-out infinite;
      }

      @keyframes titleGlow {
        0%,
        100% {
          filter: brightness(1);
        }
        50% {
          filter: brightness(1.2);
        }
      }

      .subtitle {
        color: var(--text-secondary);
        font-size: 1.1rem;
        opacity: 0.8;
      }

      /* Stats Grid */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .stat-card {
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        border-radius: 1rem;
        padding: 1rem;
        text-align: center;
        transition: all var(--transition-speed) ease;
        position: relative;
        overflow: hidden;
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 70%
        );
        transform: rotate(45deg);
        transition: all 0.5s ease;
        opacity: 0;
      }

      .stat-card:hover::before {
        opacity: 1;
        transform: rotate(45deg) translate(20%, 20%);
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        border-color: rgba(255, 255, 255, 0.2);
      }

      .stat-label {
        font-size: 0.875rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 0.5rem;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-green);
        text-shadow: 0 0 20px rgba(74, 222, 128, 0.5);
        transition: all var(--transition-speed) ease;
      }

      .stat-value.coins {
        color: var(--primary-gold);
        text-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
      }

      /* Game Grid */
      .game-grid {
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 2rem;
        margin-bottom: 2rem;
      }

      @media (max-width: 768px) {
        .game-grid {
          grid-template-columns: 1fr;
          gap: 1.5rem;
        }
      }

      /* Farm Area */
      .farm-area {
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        border-radius: 1.5rem;
        padding: 3rem;
        min-height: 500px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
      }

      .farm-area::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle at center,
          rgba(74, 222, 128, 0.05) 0%,
          transparent 50%
        );
        animation: farmPulse 4s ease-in-out infinite;
      }

      @keyframes farmPulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.5;
        }
        50% {
          transform: scale(1.2);
          opacity: 0.8;
        }
      }

      .pig-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
        z-index: 1;
      }

      .pig-value {
        font-size: 2.5rem;
        font-weight: 800;
        text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        transition: all var(--transition-speed) ease;
        animation: valueFloat 3s ease-in-out infinite;
      }

      @keyframes valueFloat {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .pig {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all var(--transition-speed) cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        user-select: none;
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        border: 3px solid var(--glass-border);
        overflow: visible;
      }

      .pig::before {
        content: "";
        position: absolute;
        inset: -20px;
        border-radius: 50%;
        background: radial-gradient(
          circle at center,
          transparent 40%,
          currentColor 70%,
          transparent 71%
        );
        opacity: 0;
        transition: all var(--transition-speed) ease;
        animation: pigPulse 2s ease-in-out infinite;
      }

      @keyframes pigPulse {
        0%,
        100% {
          transform: scale(0.9);
          opacity: 0.3;
        }
        50% {
          transform: scale(1.1);
          opacity: 0.6;
        }
      }

      .pig:hover {
        transform: scale(1.05) translateY(-5px);
      }

      .pig:active {
        transform: scale(0.95);
      }

      .pig img {
        width: 75%;
        height: 75%;
        object-fit: contain;
        filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
        transition: all var(--transition-speed) ease;
        border-radius: 10px;
      }

      .pig:hover img {
        transform: scale(1.1) rotate(5deg);
      }

      /* Fallback emoji styling */
      .pig-emoji {
        width: 70%;
        height: 70%;
        object-fit: contain;
        filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
        transition: all var(--transition-speed) ease;
        font-size: 5rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .pig:hover .pig-emoji {
        transform: scale(1.1) rotate(5deg);
      }

      /* Dynamic pig states */
      .pig.runt {
        border-color: #6b7280;
        color: #6b7280;
      }

      .pig.piglet {
        border-color: #f97316;
        color: #f97316;
      }

      .pig.farm {
        border-color: var(--primary-pink);
        color: var(--primary-pink);
      }

      .pig.prize {
        border-color: #8b5cf6;
        color: #8b5cf6;
      }

      .pig.royal {
        border-color: #3b82f6;
        color: #3b82f6;
      }

      .pig.diamond {
        border-color: #06b6d4;
        color: #06b6d4;
        animation: diamondShine 2s ease-in-out infinite;
      }

      @keyframes diamondShine {
        0%,
        100% {
          filter: brightness(1) drop-shadow(0 0 15px rgba(6, 182, 212, 0.5));
        }
        50% {
          filter: brightness(1.2) drop-shadow(0 0 25px rgba(6, 182, 212, 0.7));
        }
      }

      .pig.legendary {
        border-color: var(--primary-gold);
        color: var(--primary-gold);
        animation: legendaryShine 3s ease-in-out infinite;
      }

      @keyframes legendaryShine {
        0%,
        100% {
          filter: brightness(1) drop-shadow(0 0 20px rgba(251, 191, 36, 0.5));
        }
        50% {
          filter: brightness(1.3) drop-shadow(0 0 30px rgba(251, 191, 36, 0.8));
        }
      }

      /* Kill Button */
      .kill-button {
        background: linear-gradient(135deg, #ef4444, #dc2626);
        border: none;
        color: white;
        padding: 1.25rem 2.5rem;
        border-radius: 9999px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        transition: all var(--transition-speed) ease;
        box-shadow: 0 5px 20px rgba(239, 68, 68, 0.4);
        position: relative;
        overflow: hidden;
      }

      .kill-button::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: width 0.6s ease, height 0.6s ease;
      }

      .kill-button:hover::before {
        width: 300px;
        height: 300px;
      }

      .kill-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(239, 68, 68, 0.5);
      }

      .kill-button:active {
        transform: translateY(-1px);
      }

      /* Shop */
      .shop {
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        border-radius: 1.5rem;
        padding: 0.75rem;
        height: fit-content;
        max-height: 600px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }

      .shop-header {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-gold);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        position: sticky;
        top: 0;
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        z-index: 10;
        padding: 0.5rem 0;
      }

      .shop-section {
        margin-bottom: 1rem;
      }

      .section-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.75rem;
        padding: 0.5rem;
        background: var(--dark-surface);
        border-radius: 0.5rem;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .shop-item {
        background: var(--dark-surface);
        border: 2px solid transparent;
        border-radius: 0.75rem;
        padding: 0.875rem;
        margin-bottom: 0.5rem;
        cursor: pointer;
        transition: all var(--transition-speed) ease;
        position: relative;
        overflow: hidden;
      }

      .shop-item::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transition: left 0.5s ease;
      }

      .shop-item:hover::before {
        left: 100%;
      }

      .shop-item:hover {
        transform: translateX(-5px);
        border-color: var(--primary-green);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
      }

      .shop-item.affordable {
        border-color: var(--primary-green);
        background: linear-gradient(
          135deg,
          var(--dark-surface),
          rgba(74, 222, 128, 0.1)
        );
      }

      .shop-item.disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
      }

      .item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
      }

      .item-name {
        font-weight: 700;
        color: var(--text-primary);
        font-size: 1.1rem;
      }

      .item-price {
        color: var(--primary-gold);
        font-weight: 700;
        font-size: 0.9rem;
        background: rgba(251, 191, 36, 0.1);
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
      }

      .item-description {
        font-size: 0.875rem;
        color: var(--text-secondary);
        line-height: 1.5;
      }

      /* Auto Clickers */
      .auto-clickers {
        margin-top: 1.5rem;
        padding: 1.25rem;
        background: var(--dark-surface);
        border-radius: 1rem;
        border: 2px solid #3b82f6;
      }

      .auto-clicker-status {
        color: #3b82f6;
        font-weight: 600;
        line-height: 1.8;
      }

      /* Ribbon System */
      .ribbon-display {
        position: absolute;
        top: -10px;
        right: -10px;
        background: linear-gradient(135deg, #ec4899, #be185d);
        color: white;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.875rem;
        font-weight: 700;
        box-shadow: 0 4px 12px rgba(236, 72, 153, 0.4);
        animation: ribbonPulse 2s ease-in-out infinite;
        z-index: 2;
      }

      @keyframes ribbonPulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: 0 4px 12px rgba(236, 72, 153, 0.4);
        }
        50% {
          transform: scale(1.1);
          box-shadow: 0 6px 20px rgba(236, 72, 153, 0.6);
        }
      }

      .ribbon-effect {
        position: fixed;
        color: #ec4899;
        font-weight: 800;
        font-size: 2rem;
        pointer-events: none;
        animation: ribbonRise 2s ease-out forwards;
        z-index: 200;
        text-shadow: 0 0 20px rgba(236, 72, 153, 0.8);
      }

      @keyframes ribbonRise {
        0% {
          transform: translateY(0) scale(0.8);
          opacity: 1;
        }
        50% {
          transform: translateY(-30px) scale(1.2);
          opacity: 1;
        }
        100% {
          transform: translateY(-80px) scale(1);
          opacity: 0;
        }
      }

      .ribbon-sparkle {
        position: fixed;
        pointer-events: none;
        width: 8px;
        height: 8px;
        background: #ec4899;
        border-radius: 50%;
        animation: sparkle 1.5s ease-out forwards;
        z-index: 150;
      }

      @keyframes sparkle {
        0% {
          transform: translate(0, 0) scale(1);
          opacity: 1;
        }
        100% {
          transform: translate(var(--dx), var(--dy)) scale(0);
          opacity: 0;
        }
      }

      /* Effects */
      .death-message {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.8);
        background: linear-gradient(135deg, #ef4444, #dc2626);
        color: white;
        padding: 2rem 3rem;
        border-radius: 1rem;
        font-size: 1.5rem;
        font-weight: 800;
        z-index: 1000;
        animation: deathPop 0.5s ease-out forwards;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        text-align: center;
      }

      @keyframes deathPop {
        0% {
          transform: translate(-50%, -50%) scale(0.8);
          opacity: 0;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.1);
        }
        100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 1;
        }
      }

      .death-fade-out {
        animation: deathFadeOut 0.5s ease-out forwards;
      }

      @keyframes deathFadeOut {
        to {
          transform: translate(-50%, -50%) scale(0.8);
          opacity: 0;
        }
      }

      .click-effect {
        position: fixed;
        color: var(--primary-green);
        font-weight: 800;
        font-size: 1.5rem;
        pointer-events: none;
        animation: clickRise 1s ease-out forwards;
        z-index: 100;
        text-shadow: 0 0 10px currentColor;
      }

      @keyframes clickRise {
        0% {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
        100% {
          transform: translateY(-50px) scale(1.5);
          opacity: 0;
        }
      }

      .no-pig {
        text-align: center;
        color: var(--text-secondary);
        font-size: 1.25rem;
        padding: 2rem;
        background: var(--dark-surface);
        border-radius: 1rem;
        border: 2px dashed var(--glass-border);
      }

      /* Particle system */
      .particle {
        position: fixed;
        pointer-events: none;
        width: 10px;
        height: 10px;
        background: var(--primary-gold);
        border-radius: 50%;
        animation: particle 2s ease-out forwards;
        z-index: 100;
      }

      @keyframes particle {
        0% {
          transform: translate(0, 0) scale(1);
          opacity: 1;
        }
        100% {
          transform: translate(var(--x), var(--y)) scale(0);
          opacity: 0;
        }
      }

      /* Image loading fallback */
      .pig-image-error {
        display: none;
      }

      /* Mobile Responsiveness */
      @media (max-width: 768px) {
        .container {
          padding: 0.75rem;
        }

        .stats-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 0.75rem;
        }

        .stat-card {
          padding: 1rem;
        }

        .stat-value {
          font-size: 1.5rem;
        }

        .farm-area {
          padding: 2rem 1rem;
          min-height: 400px;
        }

        .pig {
          width: 150px;
          height: 150px;
        }

        .pig-value {
          font-size: 2rem;
        }

        .shop {
          padding: 1.5rem;
        }

        .shop-item {
          padding: 1rem;
        }
      }

      /* Loading animation */
      .loading {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--dark-bg);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        animation: fadeOut 0.5s ease-out 1s forwards;
      }

      @keyframes fadeOut {
        to {
          opacity: 0;
          pointer-events: none;
        }
      }

      .loading-spinner {
        width: 60px;
        height: 60px;
        border: 4px solid var(--glass-border);
        border-top-color: var(--primary-pink);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Smooth scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
      }

      ::-webkit-scrollbar-track {
        background: var(--dark-surface);
      }

      ::-webkit-scrollbar-thumb {
        background: var(--primary-pink);
        border-radius: 5px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--primary-gold);
      }
    </style>
  </head>
  <body>
    <div class="loading">
      <div class="loading-spinner"></div>
    </div>

    <div class="container">
      <div class="header">
        <h1>🐷 Pig Farm Clicker 🐷</h1>
        <p class="subtitle">Click, Grow, Harvest, Repeat!</p>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-label">Coins</div>
          <div class="stat-value coins" id="coins">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Pigs Raised</div>
          <div class="stat-value" id="pigs-raised">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Pigs Harvested</div>
          <div class="stat-value" id="pigs-harvested">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Total Clicks</div>
          <div class="stat-value" id="total-clicks">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Ribbons Won</div>
          <div class="stat-value" id="ribbons-won">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Ribbon Chance</div>
          <div class="stat-value" id="ribbon-chance">1%</div>
        </div>
      </div>

      <div class="game-grid">
        <div class="farm-area">
          <div id="pig-area">
            <div class="no-pig">🌾 No pig yet! Buy one from the shop → 🛒</div>
          </div>
        </div>

        <div class="shop">
          <h3 class="shop-header">🛒 Shop</h3>

          <div class="shop-section">
            <div class="section-title">🐷 Pigs</div>

            <div class="shop-item" id="buy-runt-pig">
              <div class="item-header">
                <div class="item-name">Runt Pig</div>
                <div class="item-price">FREE!</div>
              </div>
              <div class="item-description">
                A scrawny pig rescued from the trash. 1 coin start, +1 per
                click.
              </div>
            </div>

            <div class="shop-item" id="buy-piglet-pig">
              <div class="item-header">
                <div class="item-name">Piglet</div>
                <div class="item-price">15 coins</div>
              </div>
              <div class="item-description">
                Young but healthy pig. 3 coins start, +2 per click.
              </div>
            </div>

            <div class="shop-item" id="buy-farm-pig">
              <div class="item-header">
                <div class="item-name">Farm Pig</div>
                <div class="item-price">50 coins</div>
              </div>
              <div class="item-description">
                Standard farm pig. 8 coins start, +3 per click.
              </div>
            </div>

            <div class="shop-item" id="buy-prize-pig">
              <div class="item-header">
                <div class="item-name">Prize Pig</div>
                <div class="item-price">200 coins</div>
              </div>
              <div class="item-description">
                Competition-ready pig. 25 coins start, +5 per click.
              </div>
            </div>

            <div class="shop-item" id="buy-royal-pig">
              <div class="item-header">
                <div class="item-name">Royal Pig</div>
                <div class="item-price">750 coins</div>
              </div>
              <div class="item-description">
                Bred for royalty. 75 coins start, +10 per click.
              </div>
            </div>

            <div class="shop-item" id="buy-diamond-pig">
              <div class="item-header">
                <div class="item-name">Diamond Pig</div>
                <div class="item-price">2,500 coins</div>
              </div>
              <div class="item-description">
                Rare crystalline pig. 200 coins start, +20 per click.
              </div>
            </div>

            <div class="shop-item" id="buy-legendary-pig">
              <div class="item-header">
                <div class="item-name">Legendary Pig</div>
                <div class="item-price">10,000 coins</div>
              </div>
              <div class="item-description">
                Mythical golden pig. 600 coins start, +50 per click.
              </div>
            </div>
          </div>

          <div class="shop-section">
            <div class="section-title">🎀 Ribbon Upgrades</div>

            <div class="shop-item" id="buy-ribbon-upgrade">
              <div class="item-header">
                <div class="item-name">Ribbon Luck</div>
                <div class="item-price" id="ribbon-upgrade-price">
                  100 coins
                </div>
              </div>
              <div class="item-description" id="ribbon-upgrade-desc">
                Increase ribbon chance from 1% to 2% per click.
              </div>
            </div>
          </div>

          <div class="shop-section">
            <div class="section-title">🤖 Automation</div>

            <div class="shop-item" id="buy-auto-clicker">
              <div class="item-header">
                <div class="item-name">Auto Clicker</div>
                <div class="item-price">25 coins</div>
              </div>
              <div class="item-description">
                Automatically clicks your pig every 2 seconds.
              </div>
            </div>

            <div class="shop-item" id="upgrade-auto-clicker">
              <div class="item-header">
                <div class="item-name">Upgrade Auto Clicker</div>
                <div class="item-price">100 coins</div>
              </div>
              <div class="item-description">
                Makes all auto clickers 25% faster.
              </div>
            </div>
          </div>

          <div class="auto-clickers">
            <div class="auto-clicker-status">
              🤖 Auto Clickers: <span id="auto-clicker-count">0</span><br />
              ⚡ Speed: <span id="auto-clicker-speed">2.0s</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      class PigClickerGame {
        constructor() {
          this.coins = 0;
          this.pigsRaised = 0;
          this.pigsHarvested = 0;
          this.totalClicks = 0;
          this.ribbonsWon = 0;
          this.ribbonChance = 1; // 1% base chance
          this.currentPig = null;
          this.autoClickers = 0;
          this.autoClickerSpeed = 2000;
          this.autoClickerUpgrades = 0;
          this.autoClickerIntervals = [];

          this.pigTypes = {
            runt: {
              cost: 0,
              startValue: 1,
              clickValue: 1,
              image: "runt.png",
              emoji: "🐖",
              className: "runt",
              name: "Runt Pig",
            },
            piglet: {
              cost: 15,
              startValue: 3,
              clickValue: 2,
              image: "piglet.png",
              emoji: "🐷",
              className: "piglet",
              name: "Piglet",
            },
            farm: {
              cost: 50,
              startValue: 8,
              clickValue: 3,
              image: "pig.png",
              emoji: "🐷",
              className: "farm",
              name: "Farm Pig",
            },
            prize: {
              cost: 200,
              startValue: 25,
              clickValue: 5,
              image: "prize.png",
              emoji: "🐽",
              className: "prize",
              name: "Prize Pig",
            },
            royal: {
              cost: 750,
              startValue: 75,
              clickValue: 10,
              image: "premium.png",
              emoji: "👑",
              className: "royal",
              name: "Royal Pig",
            },
            diamond: {
              cost: 2500,
              startValue: 200,
              clickValue: 20,
              image: "diamond.png",
              emoji: "💎",
              className: "diamond",
              name: "Diamond Pig",
            },
            legendary: {
              cost: 10000,
              startValue: 600,
              clickValue: 50,
              image: "gold.png",
              emoji: "⭐",
              className: "legendary",
              name: "Legendary Pig",
            },
          };

          this.init();
        }

        init() {
          this.loadGame();
          this.updateUI();
          this.bindEvents();
          this.startAutoClickers();

          // Remove loading screen
          setTimeout(() => {
            document.querySelector(".loading").style.display = "none";
          }, 1500);
        }

        bindEvents() {
          // Shop items
          document
            .getElementById("buy-runt-pig")
            .addEventListener("click", () => this.buyPig("runt"));
          document
            .getElementById("buy-piglet-pig")
            .addEventListener("click", () => this.buyPig("piglet"));
          document
            .getElementById("buy-farm-pig")
            .addEventListener("click", () => this.buyPig("farm"));
          document
            .getElementById("buy-prize-pig")
            .addEventListener("click", () => this.buyPig("prize"));
          document
            .getElementById("buy-royal-pig")
            .addEventListener("click", () => this.buyPig("royal"));
          document
            .getElementById("buy-diamond-pig")
            .addEventListener("click", () => this.buyPig("diamond"));
          document
            .getElementById("buy-legendary-pig")
            .addEventListener("click", () => this.buyPig("legendary"));
          document
            .getElementById("buy-auto-clicker")
            .addEventListener("click", () => this.buyAutoClicker());
          document
            .getElementById("upgrade-auto-clicker")
            .addEventListener("click", () => this.upgradeAutoClicker());
          document
            .getElementById("buy-ribbon-upgrade")
            .addEventListener("click", () => this.buyRibbonUpgrade());

          // Auto-save every 10 seconds
          setInterval(() => this.saveGame(), 10000);

          // Keyboard shortcuts
          document.addEventListener("keydown", (e) => {
            if (e.key === " " && this.currentPig) {
              e.preventDefault();
              const pigElement = document.getElementById("current-pig");
              if (pigElement) {
                const rect = pigElement.getBoundingClientRect();
                this.clickPig({
                  clientX: rect.left + rect.width / 2,
                  clientY: rect.top + rect.height / 2,
                });
              }
            }
          });
        }

        buyPig(type) {
          const pigType = this.pigTypes[type];
          if (this.currentPig || this.coins < pigType.cost) {
            this.showNotification("Cannot buy pig!", "error");
            return;
          }

          this.coins -= pigType.cost;
          this.pigsRaised++;

          this.currentPig = {
            type: type,
            value: pigType.startValue,
            ribbons: 0,
          };

          this.createPigElement();
          this.updateUI();
          this.saveGame();
          this.showNotification(
            `${type.charAt(0).toUpperCase() + type.slice(1)} pig purchased!`,
            "success"
          );
        }

        createPigElement() {
          const pigType = this.pigTypes[this.currentPig.type];
          const pigArea = document.getElementById("pig-area");

          // Create pig image element with fallback
          const pigImageHTML = `
            <img src="${pigType.image}" 
                 alt="${this.currentPig.type} pig" 
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
            <span class="pig-emoji" style="display: none;">${pigType.emoji}</span>
          `;

          pigArea.innerHTML = `
                    <div class="pig-container">
                        <div class="pig-value">💰 ${this.formatNumber(
                          this.currentPig.value
                        )} coins</div>
                        <div class="pig ${pigType.className}" id="current-pig">
                            ${pigImageHTML}
                            <div class="ribbon-display" id="ribbon-display" style="display: none;">
                                🎀<span id="ribbon-count">0</span>
                            </div>
                        </div>
                        <button class="kill-button" id="kill-pig-btn">
                            💀 HARVEST PIG 💀
                        </button>
                    </div>
                `;

          // Add event listeners
          document
            .getElementById("current-pig")
            .addEventListener("click", (e) => this.clickPig(e));
          document
            .getElementById("kill-pig-btn")
            .addEventListener("click", () => this.killPig());

          // Apply initial appearance
          this.updatePigAppearance();
          this.updateRibbonDisplay();
        }

        clickPig(event) {
          if (!this.currentPig) return;

          const pigType = this.pigTypes[this.currentPig.type];
          this.currentPig.value += pigType.clickValue;
          this.totalClicks++;

          // Check for ribbon
          if (Math.random() * 100 < this.ribbonChance) {
            this.awardRibbon(event);
          }

          // Update appearance
          this.updatePigAppearance();

          // Show click effect
          this.showClickEffect(event, `+${pigType.clickValue}`);

          // Create particles
          this.createParticles(event.clientX, event.clientY);

          // Haptic feedback for mobile
          if (window.navigator.vibrate) {
            window.navigator.vibrate(10);
          }

          this.updateUI();
        }

        updateRibbonUpgradeShop() {
          const upgradeCosts = [
            100, 250, 500, 1000, 2000, 4000, 7500, 12500, 20000,
          ];
          const currentLevel = this.ribbonChance - 1;

          const priceElement = document.getElementById("ribbon-upgrade-price");
          const descElement = document.getElementById("ribbon-upgrade-desc");
          const shopItem = document.getElementById("buy-ribbon-upgrade");

          if (currentLevel >= 9) {
            priceElement.textContent = "MAXED";
            descElement.textContent = "Ribbon chance is at maximum (10%)!";
            shopItem.classList.add("disabled");
            shopItem.classList.remove("affordable");
          } else {
            const cost = upgradeCosts[currentLevel];
            const nextLevel = this.ribbonChance + 1;
            priceElement.textContent = this.formatNumber(cost) + " coins";
            descElement.textContent = `Increase ribbon chance from ${this.ribbonChance}% to ${nextLevel}% per click.`;

            shopItem.classList.toggle("affordable", this.coins >= cost);
            shopItem.classList.remove("disabled");
          }
        }

        buyRibbonUpgrade() {
          const upgradeCosts = [
            100, 250, 500, 1000, 2000, 4000, 7500, 12500, 20000,
          ];
          const currentLevel = this.ribbonChance - 1; // Convert 1-10% to 0-9 index

          if (currentLevel >= 9) {
            this.showNotification("Ribbon chance maxed out!", "info");
            return;
          }

          const cost = upgradeCosts[currentLevel];
          if (this.coins >= cost) {
            this.coins -= cost;
            this.ribbonChance++;
            this.updateUI();
            this.saveGame();
            this.showNotification(
              `Ribbon chance increased to ${this.ribbonChance}%!`,
              "success"
            );
          } else {
            this.showNotification("Not enough coins!", "error");
          }
        }

        awardRibbon(event) {
          this.currentPig.ribbons++;
          this.ribbonsWon++;

          // Apply 25% bonus to current value
          const bonus = Math.floor(this.currentPig.value * 0.25);
          this.currentPig.value += bonus;

          // Show ribbon effect
          this.showRibbonEffect(event, bonus);

          // Create sparkles
          this.createSparkles(event.clientX, event.clientY);

          // Update ribbon display
          this.updateRibbonDisplay();

          // Haptic feedback
          if (window.navigator.vibrate) {
            window.navigator.vibrate([50, 30, 50]);
          }
        }

        showRibbonEffect(event, bonus) {
          const effect = document.createElement("div");
          effect.className = "ribbon-effect";
          effect.textContent = `🎀 +${this.formatNumber(bonus)} BONUS!`;
          effect.style.left = event.clientX + "px";
          effect.style.top = event.clientY + "px";

          document.body.appendChild(effect);
          setTimeout(() => effect.remove(), 2000);
        }

        createSparkles(x, y) {
          for (let i = 0; i < 8; i++) {
            const sparkle = document.createElement("div");
            sparkle.className = "ribbon-sparkle";
            sparkle.style.left = x + "px";
            sparkle.style.top = y + "px";

            const dx = (Math.random() - 0.5) * 120;
            const dy = (Math.random() - 0.5) * 120;
            sparkle.style.setProperty("--dx", dx + "px");
            sparkle.style.setProperty("--dy", dy + "px");

            document.body.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 1500);
          }
        }

        updateRibbonDisplay() {
          const ribbonDisplay = document.getElementById("ribbon-display");
          const ribbonCount = document.getElementById("ribbon-count");

          if (this.currentPig && this.currentPig.ribbons > 0) {
            ribbonDisplay.style.display = "flex";
            ribbonCount.textContent = this.currentPig.ribbons;
          } else if (ribbonDisplay) {
            ribbonDisplay.style.display = "none";
          }
        }

        updatePigAppearance() {
          const value = this.currentPig.value;
          const pigElement = document.getElementById("current-pig");
          const valueElement = document.querySelector(".pig-value");
          const killButton = document.getElementById("kill-pig-btn");

          if (!pigElement || !valueElement || !killButton) return;

          // Update value display
          valueElement.textContent = `💰 ${this.formatNumber(value)} coins`;

          // Dynamic scaling based on value
          let scale = 1 + Math.min(value / 500, 0.5);
          pigElement.style.transform = `scale(${scale})`;

          // Update colors and effects based on value thresholds
          if (value >= 500) {
            valueElement.style.color = "#e91e63";
            killButton.textContent = "👑 LEGENDARY HARVEST 👑";
            killButton.style.background =
              "linear-gradient(135deg, #4ade80, #22c55e)";
          } else if (value >= 200) {
            valueElement.style.color = "#f44336";
            killButton.textContent = "💎 EPIC HARVEST 💎";
            killButton.style.background =
              "linear-gradient(135deg, #f59e0b, #f97316)";
          } else if (value >= 100) {
            valueElement.style.color = "#ff9800";
            killButton.textContent = "🔥 MEGA HARVEST 🔥";
            killButton.style.background =
              "linear-gradient(135deg, #ef4444, #dc2626)";
          } else if (value >= 50) {
            valueElement.style.color = "#fbbf24";
            killButton.textContent = "⚔️ HARVEST PIG ⚔️";
          } else {
            valueElement.style.color = "#4ade80";
            killButton.textContent = "💀 HARVEST PIG 💀";
          }

          // Add glow effect for high values
          if (value >= 100) {
            pigElement.style.boxShadow = `0 0 ${
              20 + value / 10
            }px currentColor`;
          }
        }

        showClickEffect(event, text) {
          const effect = document.createElement("div");
          effect.className = "click-effect";
          effect.textContent = text;
          effect.style.left = event.clientX + "px";
          effect.style.top = event.clientY + "px";

          document.body.appendChild(effect);

          setTimeout(() => effect.remove(), 1000);
        }

        createParticles(x, y) {
          for (let i = 0; i < 5; i++) {
            const particle = document.createElement("div");
            particle.className = "particle";
            particle.style.left = x + "px";
            particle.style.top = y + "px";
            particle.style.setProperty(
              "--x",
              `${(Math.random() - 0.5) * 100}px`
            );
            particle.style.setProperty(
              "--y",
              `${(Math.random() - 0.5) * 100}px`
            );
            particle.style.backgroundColor = ["#4ade80", "#ec4899", "#fbbf24"][
              Math.floor(Math.random() * 3)
            ];

            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 2000);
          }
        }

        killPig() {
          if (!this.currentPig) return;

          const value = this.currentPig.value;
          this.coins += value;
          this.pigsHarvested++;

          this.showDeathMessage(
            `💰 HARVESTED FOR ${this.formatNumber(value)} COINS! 💰`
          );

          this.currentPig = null;
          document.getElementById("pig-area").innerHTML =
            '<div class="no-pig">🌾 Pig harvested! Buy a new one from the shop → 🛒</div>';

          this.updateUI();
          this.saveGame();
        }

        showDeathMessage(message) {
          const messageElement = document.createElement("div");
          messageElement.className = "death-message";
          messageElement.textContent = message;
          document.body.appendChild(messageElement);

          // Confetti effect
          this.createConfetti();

          setTimeout(() => {
            messageElement.classList.add("death-fade-out");
            setTimeout(() => messageElement.remove(), 500);
          }, 2000);
        }

        createConfetti() {
          const colors = [
            "#4ade80",
            "#ec4899",
            "#fbbf24",
            "#3b82f6",
            "#8b5cf6",
          ];
          for (let i = 0; i < 30; i++) {
            setTimeout(() => {
              const confetti = document.createElement("div");
              confetti.className = "particle";
              confetti.style.left = Math.random() * window.innerWidth + "px";
              confetti.style.top = window.innerHeight / 2 + "px";
              confetti.style.setProperty(
                "--x",
                `${(Math.random() - 0.5) * 300}px`
              );
              confetti.style.setProperty("--y", `${Math.random() * -300}px`);
              confetti.style.backgroundColor =
                colors[Math.floor(Math.random() * colors.length)];
              confetti.style.width = "15px";
              confetti.style.height = "15px";

              document.body.appendChild(confetti);
              setTimeout(() => confetti.remove(), 2000);
            }, i * 30);
          }
        }

        buyAutoClicker() {
          const cost = 25;
          if (this.coins >= cost) {
            this.coins -= cost;
            this.autoClickers++;
            this.updateUI();
            this.saveGame();
            this.showNotification("Auto Clicker purchased!", "success");
            this.restartAutoClickers();
          } else {
            this.showNotification("Not enough coins!", "error");
          }
        }

        upgradeAutoClicker() {
          const cost = 100;
          if (this.coins >= cost && this.autoClickers > 0) {
            this.coins -= cost;
            this.autoClickerUpgrades++;
            this.autoClickerSpeed = Math.max(
              500,
              2000 - this.autoClickerUpgrades * 375
            );
            this.updateUI();
            this.saveGame();
            this.showNotification("Auto Clickers upgraded!", "success");
            this.restartAutoClickers();
          } else {
            this.showNotification("Cannot upgrade!", "error");
          }
        }

        startAutoClickers() {
          // Clear existing intervals
          this.autoClickerIntervals.forEach((interval) =>
            clearInterval(interval)
          );
          this.autoClickerIntervals = [];

          // Create new intervals for each auto clicker
          for (let i = 0; i < this.autoClickers; i++) {
            const interval = setInterval(() => {
              if (this.currentPig) {
                const pigElement = document.getElementById("current-pig");
                if (pigElement) {
                  const rect = pigElement.getBoundingClientRect();
                  this.clickPig({
                    clientX:
                      rect.left + rect.width / 2 + (Math.random() - 0.5) * 50,
                    clientY:
                      rect.top + rect.height / 2 + (Math.random() - 0.5) * 50,
                  });
                }
              }
            }, this.autoClickerSpeed);
            this.autoClickerIntervals.push(interval);
          }
        }

        restartAutoClickers() {
          this.startAutoClickers();
        }

        showNotification(message, type = "info") {
          const notification = document.createElement("div");
          notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 1rem 1.5rem;
                    border-radius: 0.5rem;
                    color: white;
                    font-weight: 600;
                    z-index: 1000;
                    animation: slideIn 0.3s ease-out;
                    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
                `;

          if (type === "success") {
            notification.style.background =
              "linear-gradient(135deg, #4ade80, #22c55e)";
          } else if (type === "error") {
            notification.style.background =
              "linear-gradient(135deg, #ef4444, #dc2626)";
          } else {
            notification.style.background =
              "linear-gradient(135deg, #3b82f6, #2563eb)";
          }

          notification.textContent = message;
          document.body.appendChild(notification);

          setTimeout(() => {
            notification.style.animation = "slideOut 0.3s ease-out forwards";
            setTimeout(() => notification.remove(), 300);
          }, 2000);
        }

        formatNumber(num) {
          if (num >= 1000000) return (num / 1000000).toFixed(1) + "M";
          if (num >= 1000) return (num / 1000).toFixed(1) + "K";
          return num.toString();
        }

        updateUI() {
          // Update stats
          document.getElementById("coins").textContent = this.formatNumber(
            this.coins
          );
          document.getElementById("pigs-raised").textContent =
            this.formatNumber(this.pigsRaised);
          document.getElementById("pigs-harvested").textContent =
            this.formatNumber(this.pigsHarvested);
          document.getElementById("total-clicks").textContent =
            this.formatNumber(this.totalClicks);
          document.getElementById("ribbons-won").textContent =
            this.formatNumber(this.ribbonsWon);
          document.getElementById("ribbon-chance").textContent =
            this.ribbonChance + "%";
          document.getElementById("auto-clicker-count").textContent =
            this.autoClickers;
          document.getElementById("auto-clicker-speed").textContent =
            (this.autoClickerSpeed / 1000).toFixed(1) + "s";

          // Update shop affordability
          this.updateShopItem(
            "buy-runt-pig",
            this.pigTypes.runt.cost,
            !this.currentPig
          );
          this.updateShopItem(
            "buy-piglet-pig",
            this.pigTypes.piglet.cost,
            !this.currentPig
          );
          this.updateShopItem(
            "buy-farm-pig",
            this.pigTypes.farm.cost,
            !this.currentPig
          );
          this.updateShopItem(
            "buy-prize-pig",
            this.pigTypes.prize.cost,
            !this.currentPig
          );
          this.updateShopItem(
            "buy-royal-pig",
            this.pigTypes.royal.cost,
            !this.currentPig
          );
          this.updateShopItem(
            "buy-diamond-pig",
            this.pigTypes.diamond.cost,
            !this.currentPig
          );
          this.updateShopItem(
            "buy-legendary-pig",
            this.pigTypes.legendary.cost,
            !this.currentPig
          );
          this.updateShopItem("buy-auto-clicker", 25, true);
          this.updateShopItem(
            "upgrade-auto-clicker",
            100,
            this.autoClickers > 0
          );

          // Update ribbon upgrade
          this.updateRibbonUpgradeShop();
        }

        updateShopItem(elementId, cost, canBuy) {
          const element = document.getElementById(elementId);
          const affordable = this.coins >= cost;

          element.classList.toggle("affordable", affordable && canBuy);
          element.classList.toggle("disabled", !canBuy);
        }

        saveGame() {
          const gameState = {
            coins: this.coins,
            pigsRaised: this.pigsRaised,
            pigsHarvested: this.pigsHarvested,
            totalClicks: this.totalClicks,
            ribbonsWon: this.ribbonsWon,
            ribbonChance: this.ribbonChance,
            currentPig: this.currentPig,
            autoClickers: this.autoClickers,
            autoClickerUpgrades: this.autoClickerUpgrades,
            autoClickerSpeed: this.autoClickerSpeed,
          };
          // Note: localStorage is not available in this environment
          // In a real implementation, you would save to localStorage:
          // localStorage.setItem('pigClickerSave', JSON.stringify(gameState));
        }

        loadGame() {
          // Note: localStorage is not available in this environment
          // In a real implementation, you would load from localStorage:
          // const saved = localStorage.getItem('pigClickerSave');
          // if (saved) {
          //     const gameState = JSON.parse(saved);
          //     Object.assign(this, gameState);
          //     if (this.currentPig) {
          //         this.createPigElement();
          //     }
          // }
        }
      }

      // Add slide animations
      const style = document.createElement("style");
      style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
        `;
      document.head.appendChild(style);

      // Start the game
      const game = new PigClickerGame();
    </script>
  </body>
</html>
